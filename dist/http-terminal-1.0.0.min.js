(function(h,n){function o(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}}return!1}"undefined"===typeof window&&(window={});"undefined"===typeof localStorage&&(localStorage={});window.headers=localStorage.headers?JSON.parse(localStorage.headers):{};window.pretty=localStorage.pretty;var g;g="http-terminal v1.0.0<br>Welcome, enter 'help' if you're lost.<br>"+("Pretty printing is "+
(window.pretty?"ON":"OFF")+"<br>");for(var i in window.headers)g+=i+": "+window.headers[i]+"<br>";var j={welcome:g+"<br>",prompt:localStorage.prompt,separator:"&gt;"},k={execute:function(c){switch(c){case "clear":return terminal.clear(),"";case "help":return'Commands: .., .headers, .json, .pretty, clear, delete, get, head, help, options, patch, put, post, ver, version<br>More help <a class="external" href="http://github.com/SDA/http-terminal" target="_blank">here</a>';case "version":case "ver":return"1.0.0";
default:return!1}}},l={commands:[],execute:function(c,d){cmdlc=c.toLowerCase();if(".."==c){var a=terminal.getPrompt();a.match(/http(s)?:\/\/[^\/]+(\/[^\/]+)+\/?/)&&(a=a.replace(/\/[^\/]+$/,""),terminal.setPrompt(a),localStorage.prompt=a);return""}if(".headers"==cmdlc){var b="";for(a in window.headers)var e=window.headers[a],b=b+(a+": "+e+"<br>");return b}if(".json"==cmdlc)return window.headers.Accept="application/json",window.headers["Content-Type"]="application/json",localStorage.headers=JSON.stringify(window.headers),
"";if(".pretty"==cmdlc)return window.pretty=0==d.length||d[0]&&d[0].toLowerCase().match(/^true|on|yes$/)?!0:!1,localStorage.pretty=window.pretty,"Pretty printing is "+(window.pretty?"ON":"OFF");if(c.match(/^(\/[^\/]+)+$/))return a=terminal.getPrompt()+c,terminal.setPrompt(a),localStorage.prompt=a,"";if(c.match(/^http(s)?:\/\/[^\/]+.*$/))return a=c,terminal.setPrompt(a),localStorage.prompt=a,"";if(c.match(/^[^:\s]+:(.*)$/))return b=c.match(/^([^:\s]+):(.*)$/),a=b[1],(e=b[2]||d.join(" "))?window.headers[a]=
e:delete window.headers[a],localStorage.headers=JSON.stringify(window.headers),"";if(cmdlc.match(/^post|get|put|delete|patch|head|options$/)){var g=terminal.getPrompt(),h=c.toUpperCase(),i=d.join(" "),b="";try{var f=o();f.open(h,g,!1);for(a in window.headers)e=window.headers[a],f.setRequestHeader(a,e);f.send(i);b+=f.status+" "+f.statusText+"<br>";f.getAllResponseHeaders().trim()&&(b+=f.getAllResponseHeaders()+"<br>");var b=b+"<br>",m=f.getResponseHeader("content-type");if(window.pretty&&m&&m.match(/json/))var j=
JSON.parse(f.responseText),k="<pre>"+JSON.stringify(j,n,2)+"</pre>",b=b+k;else b+=f.responseText}catch(l){b=l}return b}return!1}},e=e||function(c){var d=new Terminal(c,j,k,l);return{clear:function(){return d.clear()},setPrompt:function(a){return d.setPrompt(a)},getPrompt:function(){return d.getPrompt()},setTheme:function(a){return d.setTheme(a)},getTheme:function(){return d.getTheme()}}};if("undefined"!==typeof module&&module.exports)module.exports=e;else{var p=h.HTTPTerminal;e.noConflict=function(){h.HTTPTerminal=
p;return e};h.HTTPTerminal=e}})(this);
